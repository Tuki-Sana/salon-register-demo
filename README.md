# サロンレジ デモ

美容室・サロン向けの料金計算レジの**デモ用**フロントエンドです。  
Vite + Vanilla JavaScript で構成し、バックエンドなしで **JSON と IndexedDB のみ**で動作します。  
**面接・ポートフォリオ用**のデモとして、スマートフォン〜デスクトップまで一通り操作できる想定で実装しています。

---

## 想定ユースケース

- 小規模サロン・美容室の**簡易 POS デモ**
- 店頭でのタブレット／スマートフォン利用を想定した UI
- 会計・顧客管理・日次レポート・データのバックアップまで一連の流れを体験可能

---

## 技術スタック・設計

| 項目 | 内容 |
|------|------|
| **ビルド** | Vite |
| **フロント** | Vanilla JavaScript（フレームワークなし）、モジュール分割（`src/modules/`） |
| **スタイル** | SCSS モジュール（`src/styles/`）、Tailwind CSS（モック用） |
| **データ** | メニュー・商品: `public/menus.json` / `public/products.json`、会計履歴: **IndexedDB** |

コード構成の詳細は [MODULE_STRUCTURE.md](./MODULE_STRUCTURE.md) を参照。

### 設計のポイント

- **モーダル**: オーバーレイ＋flex で共通の余白（margin）を統一。緑ヘッダーに白字・中央揃えのタイトルで「今何の設定をしているか」を明示。
- **状態管理**: `register.js` で顧客・明細を保持。会計確定時に IndexedDB へ保存。
- **レスポンシブ**: モバイルファースト。768px / 1024px でモーダル幅・レイアウトを調整し、タブレット・デスクトップでも使いやすい幅に。
- **操作補助**: キーボードショートカット（Enter 会計、Esc 閉じる、/ 検索フォーカス、0–9 クイック金額）、カスタムアラート／確認ダイアログでネイティブ `alert` を排除。

---

## 主な機能

- **レジ操作**  
  複数顧客、メニュー／商品選択、合計・お預かり・お釣り、会計確定。  
  複数顧客時は「個別会計」「まとめて会計」を選択可能。お預かり金額が不足している場合は会計不可。
- **価格・割引設定**  
  カラー時／パーマ時カット料金、施術（メニュー）価格の上書き。
- **商品管理**  
  商品の追加・価格上書き・削除。税込表示。
- **テーマ設定**  
  色プリセットの選択、カスタムプリセットの保存・削除。
- **会計データ管理**  
  IndexedDB の会計履歴を JSON でバックアップ／復元。
- **締め作業**  
  日次レポート（本日の売上・商品別 TOP5・ピーク時間帯）、過去 1 週間の履歴表示、本日データのクリア。

---

## デモの操作の流れ（目安）

1. **起動**  
   `pnpm run dev` 後、表示された URL で `/login.html` を開く。
2. **ログイン**  
   「デモで始める」を押す（認証は行わず、ボタン操作のみでメイン画面へ）。
3. **レジ**  
   必要に応じて「＋顧客追加」で顧客を追加し、左側のメニュー／商品をタップして明細に追加。右側でお預かり金額を入力し「会計確定」。
4. **メニュー（ハンバーガー）**  
   - **締め作業** → 日次レポート・過去の履歴・本日データクリア  
   - **料金設定** → 価格・割引設定、商品管理  
   - **環境設定** → テーマ設定、データ管理（バックアップ／復元）  
   - **ログアウト**
5. **キーボード**  
   Enter（会計）、Esc（モーダルを閉じる）、`/`（商品検索にフォーカス）、`0`–`9`（クイック金額）が利用可能。

---

## 使い方

```bash
pnpm install
pnpm run dev
```

開発サーバー起動後、表示された URL（例: `http://localhost:5173`）で `/login.html` を開き、「デモで始める」からメイン画面へ進みます。

---

## ビルド

```bash
pnpm run build
```

`dist/` に出力されます。静的ホスティング（Cloudflare Pages など）にそのままデプロイできます。

---

## モック（TypeScript + SCSS + Tailwind CSS）

本番の `index.html` / `main.js` / `style.scss` とは別に、**モック**を用意しています。

- **エントリ**: `mock.html` → `src/mock/main.ts` + `src/mock/styles/main.scss`
- **起動**: `pnpm run dev` のあと、`http://localhost:5173/mock.html` を開く
- **ビルド**: `pnpm run build` に含まれ、`dist/mock.html` に出力されます

---

## 注意

このリポジトリは**デモ・ポートフォリオ用**です。実運用でバックエンドと連携する場合は別構成になります。
